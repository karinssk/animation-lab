{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garin/OneDrive/Desktop/Projects/animation/app/api/places/details/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\n\nconst API_KEY = process.env.GOOGLE_PLACE_API_KEY!;\nconst BASE = \"https://maps.googleapis.com/maps/api/place/details/json\";\n\nconst FIELDS = [\n  \"name\", \"formatted_address\", \"formatted_phone_number\", \"geometry\",\n  \"photos\", \"rating\", \"user_ratings_total\", \"reviews\", \"opening_hours\",\n  \"website\", \"types\", \"price_level\", \"editorial_summary\", \"business_status\",\n].join(\",\");\n\nexport async function GET(request: NextRequest) {\n  const placeId = request.nextUrl.searchParams.get(\"placeId\");\n\n  if (!placeId) {\n    return NextResponse.json({ error: \"Missing placeId\" }, { status: 400 });\n  }\n\n  try {\n    const params = new URLSearchParams({\n      place_id: placeId,\n      fields: FIELDS,\n      key: API_KEY,\n      language: \"th\",\n    });\n\n    const res = await fetch(`${BASE}?${params}`);\n    const data = await res.json();\n\n    if (data.status !== \"OK\") {\n      return NextResponse.json(\n        { error: data.error_message || data.status },\n        { status: 400 }\n      );\n    }\n\n    const r = data.result;\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    const details = {\n      placeId,\n      name: r.name || \"\",\n      formattedAddress: r.formatted_address || \"\",\n      formattedPhone: r.formatted_phone_number || null,\n      website: r.website || null,\n      rating: r.rating ?? null,\n      userRatingsTotal: r.user_ratings_total ?? 0,\n      priceLevel: r.price_level ?? null,\n      openNow: r.opening_hours?.open_now ?? null,\n      weekdayText: r.opening_hours?.weekday_text || [],\n      photos: (r.photos || []).slice(0, 8).map((p: any) => ({\n        photoReference: p.photo_reference,\n        width: p.width,\n        height: p.height,\n      })),\n      reviews: (r.reviews || []).slice(0, 5).map((rv: any) => ({\n        authorName: rv.author_name || \"Anonymous\",\n        authorPhotoUrl: rv.profile_photo_url || \"\",\n        rating: rv.rating ?? 0,\n        relativeTime: rv.relative_time_description || \"\",\n        text: rv.text || \"\",\n      })),\n      types: r.types || [],\n      editorialSummary: r.editorial_summary?.overview || null,\n      location: r.geometry?.location || { lat: 0, lng: 0 },\n    };\n\n    return NextResponse.json(details, {\n      headers: {\n        \"Cache-Control\": \"public, s-maxage=300, stale-while-revalidate=600\",\n      },\n    });\n  } catch (err) {\n    console.error(\"Place details error:\", err);\n    return NextResponse.json({ error: \"Internal error\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU,QAAQ,GAAG,CAAC,oBAAoB;AAChD,MAAM,OAAO;AAEb,MAAM,SAAS;IACb;IAAQ;IAAqB;IAA0B;IACvD;IAAU;IAAU;IAAsB;IAAW;IACrD;IAAW;IAAS;IAAe;IAAqB;CACzD,CAAC,IAAI,CAAC;AAEA,eAAe,IAAI,OAAoB;IAC5C,MAAM,UAAU,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAEjD,IAAI,CAAC,SAAS;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,IAAI;QACF,MAAM,SAAS,IAAI,gBAAgB;YACjC,UAAU;YACV,QAAQ;YACR,KAAK;YACL,UAAU;QACZ;QAEA,MAAM,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,EAAE,QAAQ;QAC3C,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,IAAI,KAAK,MAAM,KAAK,MAAM;YACxB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO,KAAK,aAAa,IAAI,KAAK,MAAM;YAAC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,IAAI,KAAK,MAAM;QAErB,qDAAqD,GACrD,MAAM,UAAU;YACd;YACA,MAAM,EAAE,IAAI,IAAI;YAChB,kBAAkB,EAAE,iBAAiB,IAAI;YACzC,gBAAgB,EAAE,sBAAsB,IAAI;YAC5C,SAAS,EAAE,OAAO,IAAI;YACtB,QAAQ,EAAE,MAAM,IAAI;YACpB,kBAAkB,EAAE,kBAAkB,IAAI;YAC1C,YAAY,EAAE,WAAW,IAAI;YAC7B,SAAS,EAAE,aAAa,EAAE,YAAY;YACtC,aAAa,EAAE,aAAa,EAAE,gBAAgB,EAAE;YAChD,QAAQ,CAAC,EAAE,MAAM,IAAI,EAAE,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAW,CAAC;oBACpD,gBAAgB,EAAE,eAAe;oBACjC,OAAO,EAAE,KAAK;oBACd,QAAQ,EAAE,MAAM;gBAClB,CAAC;YACD,SAAS,CAAC,EAAE,OAAO,IAAI,EAAE,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,KAAY,CAAC;oBACvD,YAAY,GAAG,WAAW,IAAI;oBAC9B,gBAAgB,GAAG,iBAAiB,IAAI;oBACxC,QAAQ,GAAG,MAAM,IAAI;oBACrB,cAAc,GAAG,yBAAyB,IAAI;oBAC9C,MAAM,GAAG,IAAI,IAAI;gBACnB,CAAC;YACD,OAAO,EAAE,KAAK,IAAI,EAAE;YACpB,kBAAkB,EAAE,iBAAiB,EAAE,YAAY;YACnD,UAAU,EAAE,QAAQ,EAAE,YAAY;gBAAE,KAAK;gBAAG,KAAK;YAAE;QACrD;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,SAAS;YAChC,SAAS;gBACP,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiB,GAAG;YAAE,QAAQ;QAAI;IACtE;AACF"}}]
}