{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garin/OneDrive/Desktop/Projects/animation/app/components/WalletRevealAnimation.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion, useAnimation, Variants } from \"framer-motion\";\nimport { useState, useEffect } from \"react\";\n\n// --- Assets ---\n// Simple internal components for the card designs to avoid external dependencies.\n\nconst YellowCard = () => (\n    <div className=\"w-full h-full bg-[#FFD54F] relative flex flex-col justify-between p-6 overflow-hidden rounded-[2rem]\">\n        {/* Background Shapes */}\n        <div className=\"absolute top-0 right-0 w-32 h-32 bg-orange-300 rounded-full blur-2xl opacity-50 -mr-10 -mt-10\"></div>\n        <div className=\"absolute bottom-0 left-0 w-full h-24 bg-white/30 rounded-full blur-xl mb-[-2rem]\"></div>\n\n        {/* Content */}\n        <div className=\"relative z-10 flex justify-between items-start\">\n            <div className=\"bg-green-100 text-green-700 font-bold px-3 py-1 rounded-full text-xs\">New</div>\n            <div className=\"text-orange-900/20 text-4xl\">‚ú®</div>\n        </div>\n\n        <div className=\"relative z-10 text-center mt-4\">\n            <div className=\"w-16 h-16 bg-orange-400 rounded-full mx-auto flex items-center justify-center text-3xl shadow-lg mb-2\">\n                ‚≠ê\n            </div>\n        </div>\n\n        <div className=\"relative z-10 mt-auto\">\n            <h2 className=\"text-3xl font-black text-zinc-900\">$0.36</h2>\n            <p className=\"text-sm font-bold text-zinc-600\">Cashback</p>\n        </div>\n\n        {/* Cloud overlay similar to reference */}\n        <div className=\"absolute bottom-0 left-0 right-0 h-24 bg-white rounded-[2rem] translate-y-12 scale-150 rounded-t-[100%]\"></div>\n    </div>\n);\n\nconst BlueCard = () => (\n    <div className=\"w-full h-full bg-[#2563EB] relative flex flex-col justify-between p-6 overflow-hidden rounded-[2rem]\">\n        {/* Pattern */}\n        <div className=\"absolute inset-0 opacity-10\"\n            style={{ backgroundImage: 'radial-gradient(circle, #ffffff 1px, transparent 1px)', backgroundSize: '16px 16px' }}>\n        </div>\n\n        <div className=\"relative z-10 flex justify-between items-start\">\n            <div className=\"w-8 h-8 rounded-full bg-blue-400/30\"></div>\n            <div className=\"bg-blue-400/30 text-white font-bold px-3 py-1 rounded-full text-xs\">Visa</div>\n        </div>\n\n        <div className=\"relative flex-1 flex items-center justify-center\">\n            <span className=\"text-6xl opacity-20\">üí≥</span>\n        </div>\n\n        <div className=\"relative z-10\">\n            <div className=\"h-2 w-24 bg-white/20 rounded-full mb-2\"></div>\n            <div className=\"h-2 w-16 bg-white/20 rounded-full\"></div>\n        </div>\n    </div>\n);\n\nconst GreenCard = () => (\n    <div className=\"w-full h-full bg-[#10B981] relative flex flex-col justify-between p-4 overflow-hidden rounded-[2rem]\">\n        <div className=\"absolute top-0 right-0 w-24 h-24 bg-white/20 rounded-full -mr-8 -mt-8 blur-xl\"></div>\n        <div className=\"relative z-10 flex justify-between items-start\">\n            <div className=\"w-6 h-6 rounded-full bg-white/30 flex items-center justify-center text-[10px] text-white shadow-sm\">üõçÔ∏è</div>\n            <div className=\"bg-white/20 text-white font-bold px-2 py-0.5 rounded-full text-[10px]\">Shop</div>\n        </div>\n        <div className=\"relative z-10 mt-auto\">\n            <h2 className=\"text-xl font-bold text-white tracking-tight\">$12.50</h2>\n            <p className=\"text-[10px] text-green-100 font-medium opacity-80\">Cashback</p>\n        </div>\n    </div>\n);\n\nconst PurpleCard = () => (\n    <div className=\"w-full h-full bg-[#8B5CF6] relative flex flex-col justify-between p-4 overflow-hidden rounded-[2rem]\">\n        <div className=\"absolute bottom-0 left-0 w-full h-1/2 bg-gradient-to-t from-black/20 to-transparent\"></div>\n        <div className=\"relative z-10 flex justify-between items-start\">\n            <div className=\"bg-purple-900/30 text-white font-bold px-2 py-0.5 rounded-full text-[10px]\">Events</div>\n        </div>\n        <div className=\"relative z-10 flex items-center justify-center flex-1\">\n            <div className=\"text-3xl opacity-50 drop-shadow-md\">üéüÔ∏è</div>\n        </div>\n        <div className=\"relative z-10\">\n            <div className=\"h-1.5 w-12 bg-white/40 rounded-full mb-1\"></div>\n            <div className=\"h-1.5 w-8 bg-white/40 rounded-full\"></div>\n        </div>\n    </div>\n);\n\nconst BlackCard = () => (\n    <div className=\"w-full h-full bg-[#18181B] relative flex flex-col justify-between p-4 overflow-hidden rounded-[2rem]\">\n        <div className=\"absolute inset-0 opacity-20\" style={{ backgroundImage: 'radial-gradient(#52525B 1px, transparent 1px)', backgroundSize: '8px 8px' }}></div>\n\n        <div className=\"relative z-10 flex justify-between items-start\">\n            <div className=\"text-zinc-500 font-mono text-[10px]\">09/28</div>\n            <div className=\"text-zinc-500 font-bold text-[10px]\">VISA</div>\n        </div>\n\n        <div className=\"relative z-10 mt-auto\">\n            <div className=\"flex items-center gap-2\">\n                <div className=\"text-xl\">‚úàÔ∏è</div>\n                <div>\n                    <div className=\"text-white text-sm font-bold leading-tight\">Travel</div>\n                    <div className=\"text-[10px] text-zinc-400\">3x Points</div>\n                </div>\n            </div>\n        </div>\n    </div>\n);\n\nexport default function WalletRevealAnimation() {\n    const [stage, setStage] = useState<\"single\" | \"grid\" | \"zoom\" | \"paint\" | \"complete\">(\"single\");\n\n    useEffect(() => {\n        console.log(\"Current Stage:\", stage);\n    }, [stage]);\n\n    // Animation loop\n    useEffect(() => {\n        let mounted = true;\n\n        const runSequence = async () => {\n            while (mounted) {\n                // 1. Start Single\n                setStage(\"single\");\n                await new Promise(r => setTimeout(r, 2000));\n                if (!mounted) break;\n\n                // 2. Zoom Out to Grid\n                setStage(\"grid\");\n                await new Promise(r => setTimeout(r, 2000));\n                if (!mounted) break;\n\n                // 3. Zoom In to Top-Left\n                setStage(\"zoom\");\n                await new Promise(r => setTimeout(r, 1500));\n                if (!mounted) break;\n\n                // 4. Start Paint\n                setStage(\"paint\");\n                await new Promise(r => setTimeout(r, 6000)); // 5s animation + 1s hold\n                if (!mounted) break;\n            }\n        };\n\n        runSequence();\n        return () => { mounted = false; };\n    }, []);\n\n    const stages = [\"single\", \"grid\", \"zoom\", \"paint\"];\n    const currentStep = stages.indexOf(stage);\n\n    return (\n        <div className=\"flex flex-col items-center justify-center p-8\">\n            {/* Phone Container - Matching DesignLoadAnimation */}\n            <div\n                className=\"relative overflow-hidden rounded-[3rem] border-[8px] border-zinc-900 bg-zinc-50 shadow-2xl\"\n                style={{ width: 320, height: 680 }}\n            >\n                {/* Dynamic Island */}\n                <div className=\"absolute top-2 left-1/2 z-50 h-[26px] w-[90px] -translate-x-1/2 rounded-full bg-zinc-900\" />\n\n                {/* Header (Optional, but keeps consistency) */}\n                <div className=\"absolute top-10 left-6 right-6 z-20 flex items-center justify-between\">\n                    <div className=\"w-20 rotate-3\">\n                        {/* Placeholder for Logo if needed, or just keep it empty/different for this demo */}\n                    </div>\n                </div>\n\n                {/* VIEW 1: GRID CONTEXT */}\n                <div className=\"absolute inset-0 top-24 px-6 grid grid-cols-2 gap-4 place-items-center opacity-100 pointer-events-none content-start\">\n                    {/* The Top Left Card Placeholder */}\n                    <motion.div\n                        className=\"w-full aspect-square rounded-[2rem] bg-blue-100/50 border-2 border-dashed border-blue-200\"\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: stage === \"grid\" ? 1 : 0 }}\n                    />\n\n                    {/* Other 3 cards */}\n                    {[<GreenCard key=\"green\" />, <PurpleCard key=\"purple\" />, <BlackCard key=\"black\" />].map((card, i) => (\n                        <motion.div\n                            key={i}\n                            className=\"w-full aspect-square shadow-sm rounded-[2rem]\"\n                            initial={{ opacity: 0, scale: 0.8 }}\n                            animate={{\n                                opacity: stage === \"grid\" ? 1 : 0,\n                                scale: stage === \"grid\" ? 1 : 0.8\n                            }}\n                            transition={{ delay: 0.1 * (i + 1) }}\n                        >\n                            {card}\n                        </motion.div>\n                    ))}\n                </div>\n\n                {/* VIEW 2: THE HERO CARD */}\n                <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                    <motion.div\n                        layout\n                        className=\"relative z-20 shadow-2xl rounded-[2rem] overflow-hidden\"\n                        initial={{ width: 280, height: 380, x: 0, y: 0 }}\n                        animate={{\n                            width: stage === \"grid\" ? 128 : 280,\n                            height: stage === \"grid\" ? 128 : 380,\n                            x: stage === \"grid\" ? -72 : 0,\n                            y: stage === \"grid\" ? -180 : 0,\n                        }}\n                        transition={{\n                            type: \"spring\",\n                            stiffness: 120,\n                            damping: 20\n                        }}\n                    >\n                        {/* 1. BOTTOM LAYER (Yellow - The Reveal) */}\n                        <div className=\"absolute inset-0 z-0\">\n                            <YellowCard />\n                        </div>\n\n                        {/* 2. TOP LAYER (Blue - The Mask) */}\n                        <div className=\"absolute inset-0 z-10 pointer-events-none\">\n                            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 280 380\" preserveAspectRatio=\"none\">\n                                <defs>\n                                    <mask id=\"paintMask\">\n                                        <rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\" />\n                                        {stage === \"paint\" && (\n                                            <motion.path\n                                                d=\"M 0 380 L 105 380 L 40 380 L 0 190 L 0 152 L 245 340 L 245 306 L 0 76 L 0 38 L 245 229 L 245 192 L 35 0 L 70 0 L 245 115 L 245 76 L 140 0 L 175 0 L 245 76 L 245 38 L 210 0 L 245 0\"\n                                                fill=\"none\"\n                                                stroke=\"black\"\n                                                strokeWidth=\"150\"\n                                                strokeLinecap=\"round\"\n                                                strokeLinejoin=\"round\"\n                                                initial={{ pathLength: 0 }}\n                                                animate={{ pathLength: 1 }}\n                                                transition={{ duration: 5, ease: \"linear\" }}\n                                                filter=\"url(#displacementFilter)\"\n                                            />\n                                        )}\n                                    </mask>\n                                    <filter id=\"displacementFilter\">\n                                        <feTurbulence type=\"fractalNoise\" baseFrequency=\"0.03\" numOctaves=\"3\" result=\"noise\" />\n                                        <feDisplacementMap in=\"SourceGraphic\" in2=\"noise\" scale=\"15\" xChannelSelector=\"R\" yChannelSelector=\"G\" />\n                                    </filter>\n                                </defs>\n                            </svg>\n                        </div>\n\n                        <div\n                            className=\"absolute inset-0 z-10 w-full h-full\"\n                            style={{\n                                mask: 'url(#paintMask)',\n                                WebkitMask: 'url(#paintMask)'\n                            }}\n                        >\n                            <BlueCard />\n                        </div>\n                    </motion.div>\n\n                    {/* INVISIBLE SVG references for Firefox/cross-browser mask support if needed */}\n                    <svg className=\"absolute w-0 h-0\">\n                        <defs>\n                            <mask id=\"paintMask\" maskUnits=\"objectBoundingBox\" maskContentUnits=\"objectBoundingBox\">\n                                <rect x=\"0\" y=\"0\" width=\"1\" height=\"1\" fill=\"white\" />\n                                {stage === \"paint\" && (\n                                    <motion.path\n                                        d=\"M 0 0.7 L 0.25 1 L 0.37 1 L 0 0.5 L 0 0.4 L 0.5 1 L 0.62 1 L 0 0.2 L 0.87 0.9 L 0.12 0 L 0.87 0.5 L 0.87 0.4 L 0.5 0 L 0.87 0.2 L 0.75 0 L 0.87 0.08\"\n                                        fill=\"none\"\n                                        stroke=\"black\"\n                                        strokeWidth=\"0.25\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        initial={{ pathLength: 0 }}\n                                        animate={{ pathLength: 1 }}\n                                        transition={{ duration: 4, ease: \"linear\" }}\n                                        filter=\"url(#displacementFilter)\"\n                                    />\n                                )}\n                            </mask>\n                        </defs>\n                    </svg>\n                </div>\n            </div>\n\n            {/* Frame Indicator */}\n            <div className=\"mt-4 flex items-center gap-2\">\n                {[0, 1, 2, 3].map((i) => (\n                    <div\n                        key={i}\n                        className={`h-2 w-2 rounded-full transition-all duration-300 ${i === currentStep ? \"scale-125 bg-blue-500\" : \"bg-zinc-300\"\n                            }`}\n                    />\n                ))}\n                <span className=\"ml-2 text-xs text-zinc-400\">Frame {currentStep + 1}</span>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 821, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/garin/OneDrive/Desktop/Projects/animation/app/components/CommentArea.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\ninterface Comment {\r\n    id: string;\r\n    text: string;\r\n    image?: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport default function CommentArea({ slug }: { slug: string }) {\n    const [comments, setComments] = useState<Comment[]>([]);\n    const [text, setText] = useState(\"\");\n    const [selectedImage, setSelectedImage] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [deletingCommentId, setDeletingCommentId] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\r\n    // Fetch comments on mount\r\n    useEffect(() => {\r\n        if (!slug) return;\r\n        fetch(`/api/comments?slug=${slug}`)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (Array.isArray(data)) setComments(data);\r\n            })\r\n            .catch(err => console.error(\"Failed to load comments\", err));\r\n    }, [slug]);\r\n\r\n    const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onloadend = () => {\r\n                setSelectedImage(reader.result as string);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\r\n        if (!text.trim() && !selectedImage) return;\r\n\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const res = await fetch('/api/comments', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    text,\r\n                    image: selectedImage,\r\n                    slug,\r\n                }),\r\n            });\r\n\r\n            if (res.ok) {\r\n                const newComment = await res.json();\r\n                setComments([newComment, ...comments]);\r\n                setText(\"\");\r\n                setSelectedImage(null);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Failed to post comment\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\n\n    const handleDeleteComment = async (commentId: string) => {\n        setDeletingCommentId(commentId);\n\n        try {\n            const res = await fetch(`/api/comments?id=${encodeURIComponent(commentId)}&slug=${encodeURIComponent(slug)}`, {\n                method: \"DELETE\",\n            });\n\n            if (res.ok) {\n                setComments((prev) => prev.filter((comment) => comment.id !== commentId));\n            }\n        } catch (error) {\n            console.error(\"Failed to delete comment\", error);\n        } finally {\n            setDeletingCommentId(null);\n        }\n    };\n\r\n    return (\n        <section className=\"max-w-2xl mx-auto mt-14 mb-10 px-4\">\n            <div className=\"rounded-3xl border-2 border-zinc-300 bg-zinc-50/95 shadow-[0_10px_30px_rgba(0,0,0,0.08)] p-5 sm:p-6 dark:border-zinc-700 dark:bg-zinc-900/95\">\n                <h2 className=\"text-2xl font-bold mb-6 text-zinc-900 dark:text-zinc-100\">Discussion</h2>\n\n                {/* Input Area */}\n                <div className={`bg-white dark:bg-zinc-900 rounded-2xl shadow-md border-2 border-zinc-200 dark:border-zinc-700 p-4 mb-8 transition-opacity ${isLoading ? 'opacity-50 pointer-events-none' : ''}`}>\n                    <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n                        <textarea\n                            value={text}\n                            onChange={(e) => setText(e.target.value)}\n                            placeholder=\"Write a comment...\"\n                            className=\"w-full resize-none bg-zinc-50 dark:bg-zinc-800/80 border border-zinc-200 dark:border-zinc-700 rounded-xl p-3 focus:outline-none focus:ring-2 focus:ring-zinc-400 text-zinc-800 dark:text-zinc-200 placeholder-zinc-400 min-h-[90px]\"\n                        />\n\r\n                        {selectedImage && (\n                            <div className=\"relative w-fit\">\n                                <img\n                                    src={selectedImage}\n                                    alt=\"Preview\"\n                                    className=\"h-32 w-auto rounded-lg object-cover border border-zinc-200 dark:border-zinc-700\"\n                                />\n                                <button\n                                    type=\"button\"\n                                    onClick={() => setSelectedImage(null)}\n                                    className=\"absolute -top-2 -right-2 bg-zinc-900 text-white rounded-full p-1 shadow-md hover:bg-zinc-700 transition-colors\"\n                                >\n                                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\n                                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n                                    </svg>\n                                </button>\n                            </div>\n                        )}\n\r\n                        <div className=\"flex items-center justify-between border-t border-zinc-100 dark:border-zinc-800 pt-3\">\n                            <div className=\"flex gap-2\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => fileInputRef.current?.click()}\n                                    className=\"p-2 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full transition-colors\"\n                                    title=\"Add Image\"\n                                >\n                                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                                        <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle>\n                                        <polyline points=\"21 15 16 10 5 21\"></polyline>\n                                    </svg>\n                                </button>\n                                <input\n                                    type=\"file\"\n                                    ref={fileInputRef}\n                                    onChange={handleImageUpload}\n                                    accept=\"image/*\"\n                                    className=\"hidden\"\n                                />\n                            </div>\n\r\n                            <button\n                                type=\"submit\"\n                                disabled={!text.trim() && !selectedImage}\n                                className=\"px-4 py-2 bg-zinc-900 dark:bg-zinc-100 text-white dark:text-zinc-900 text-sm font-semibold rounded-full hover:bg-zinc-800 dark:hover:bg-zinc-200 disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\n                            >\n                                {isLoading ? 'Posting...' : 'Post Comment'}\n                            </button>\n                        </div>\n                    </form>\n                </div>\n\n                {/* Comments List */}\n                <div className=\"space-y-4\">\n                    <AnimatePresence initial={false} mode=\"popLayout\">\n                        {comments.map((comment) => (\n                            <motion.div\n                                key={comment.id}\n                                initial={{ opacity: 0, y: 20, scale: 0.95 }}\n                                animate={{ opacity: 1, y: 0, scale: 1 }}\n                                exit={{ opacity: 0, scale: 0.9 }}\n                                layout\n                                className=\"flex gap-4 p-4 bg-white dark:bg-zinc-900 rounded-2xl border-2 border-zinc-200 dark:border-zinc-700 shadow-sm\"\n                            >\n                            <div className=\"flex-shrink-0\">\r\n                                <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm\">\r\n                                    U\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex-1 min-w-0\">\n                                <div className=\"flex items-baseline justify-between mb-1\">\n                                    <span className=\"font-semibold text-zinc-900 dark:text-zinc-100 text-sm\">User</span>\n                                    <div className=\"flex items-center gap-3\">\n                                        <span className=\"text-xs text-zinc-400\">\n                                            {new Date(comment.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                        </span>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => handleDeleteComment(comment.id)}\n                                            disabled={deletingCommentId === comment.id}\n                                            className=\"text-xs font-medium text-red-500 hover:text-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                                        >\n                                            {deletingCommentId === comment.id ? \"Deleting...\" : \"Delete\"}\n                                        </button>\n                                    </div>\n                                </div>\n\r\n                                {comment.text && (\r\n                                    <p className=\"text-zinc-600 dark:text-zinc-300 text-sm mb-2 break-words\">{comment.text}</p>\r\n                                )}\r\n\r\n                                {comment.image && (\r\n                                    <img\r\n                                        src={comment.image}\r\n                                        alt=\"Comment attachment\"\r\n                                        className=\"rounded-lg max-h-60 w-auto object-cover border border-zinc-100 dark:border-zinc-800\"\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                            </motion.div>\n                        ))}\n                    </AnimatePresence>\n\n                    {comments.length === 0 && (\n                        <div className=\"text-center py-12 text-zinc-500 dark:text-zinc-400 text-sm bg-white/70 dark:bg-zinc-900/60 border border-dashed border-zinc-300 dark:border-zinc-700 rounded-2xl\">\n                            No comments yet for this page.\n                        </div>\n                    )}\n                </div>\n            </div>\n        </section>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAYe,SAAS,YAAY,EAAE,IAAI,EAAoB;IAC1D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAgB;IAC1E,MAAM,eAAe,IAAA,+MAAM,EAAmB;IAE9C,0BAA0B;IAC1B,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,MAAM;QACX,MAAM,CAAC,mBAAmB,EAAE,MAAM,EAC7B,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI,IACpB,IAAI,CAAC,CAAA;YACF,IAAI,MAAM,OAAO,CAAC,OAAO,YAAY;QACzC,GACC,KAAK,CAAC,CAAA,MAAO,QAAQ,KAAK,CAAC,2BAA2B;IAC/D,GAAG;QAAC;KAAK;IAET,MAAM,oBAAoB,CAAC;QACvB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,MAAM;YACN,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACf,iBAAiB,OAAO,MAAM;YAClC;YACA,OAAO,aAAa,CAAC;QACzB;IACJ;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC,eAAe;QAEpC,aAAa;QAEb,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACrC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACjB;oBACA,OAAO;oBACP;gBACJ;YACJ;YAEA,IAAI,IAAI,EAAE,EAAE;gBACR,MAAM,aAAa,MAAM,IAAI,IAAI;gBACjC,YAAY;oBAAC;uBAAe;iBAAS;gBACrC,QAAQ;gBACR,iBAAiB;YACrB;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC5C,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,MAAM,sBAAsB,OAAO;QAC/B,qBAAqB;QAErB,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,mBAAmB,WAAW,MAAM,EAAE,mBAAmB,OAAO,EAAE;gBAC1G,QAAQ;YACZ;YAEA,IAAI,IAAI,EAAE,EAAE;gBACR,YAAY,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,UAAY,QAAQ,EAAE,KAAK;YAClE;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC9C,SAAU;YACN,qBAAqB;QACzB;IACJ;IAEA,qBACI,8OAAC;QAAQ,WAAU;kBACf,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAA2D;;;;;;8BAGzE,8OAAC;oBAAI,WAAW,CAAC,0HAA0H,EAAE,YAAY,mCAAmC,IAAI;8BAC5L,cAAA,8OAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACpC,8OAAC;gCACG,OAAO;gCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gCACvC,aAAY;gCACZ,WAAU;;;;;;4BAGb,+BACG,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCACG,KAAK;wCACL,KAAI;wCACJ,WAAU;;;;;;kDAEd,8OAAC;wCACG,MAAK;wCACL,SAAS,IAAM,iBAAiB;wCAChC,WAAU;kDAEV,cAAA,8OAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAY,MAAK;4CAAO,QAAO;4CAAe,aAAY;;8DAC1F,8OAAC;oDAAK,IAAG;oDAAK,IAAG;oDAAI,IAAG;oDAAI,IAAG;;;;;;8DAC/B,8OAAC;oDAAK,IAAG;oDAAI,IAAG;oDAAI,IAAG;oDAAK,IAAG;;;;;;;;;;;;;;;;;;;;;;;0CAM/C,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDACG,MAAK;gDACL,SAAS,IAAM,aAAa,OAAO,EAAE;gDACrC,WAAU;gDACV,OAAM;0DAEN,cAAA,8OAAC;oDAAI,OAAM;oDAAK,QAAO;oDAAK,SAAQ;oDAAY,MAAK;oDAAO,QAAO;oDAAe,aAAY;oDAAI,eAAc;oDAAQ,gBAAe;;sEACnI,8OAAC;4DAAK,GAAE;4DAAI,GAAE;4DAAI,OAAM;4DAAK,QAAO;4DAAK,IAAG;4DAAI,IAAG;;;;;;sEACnD,8OAAC;4DAAO,IAAG;4DAAM,IAAG;4DAAM,GAAE;;;;;;sEAC5B,8OAAC;4DAAS,QAAO;;;;;;;;;;;;;;;;;0DAGzB,8OAAC;gDACG,MAAK;gDACL,KAAK;gDACL,UAAU;gDACV,QAAO;gDACP,WAAU;;;;;;;;;;;;kDAIlB,8OAAC;wCACG,MAAK;wCACL,UAAU,CAAC,KAAK,IAAI,MAAM,CAAC;wCAC3B,WAAU;kDAET,YAAY,eAAe;;;;;;;;;;;;;;;;;;;;;;;8BAO5C,8OAAC;oBAAI,WAAU;;sCACX,8OAAC,4MAAe;4BAAC,SAAS;4BAAO,MAAK;sCACjC,SAAS,GAAG,CAAC,CAAC,wBACX,8OAAC,oMAAM,CAAC,GAAG;oCAEP,SAAS;wCAAE,SAAS;wCAAG,GAAG;wCAAI,OAAO;oCAAK;oCAC1C,SAAS;wCAAE,SAAS;wCAAG,GAAG;wCAAG,OAAO;oCAAE;oCACtC,MAAM;wCAAE,SAAS;wCAAG,OAAO;oCAAI;oCAC/B,MAAM;oCACN,WAAU;;sDAEd,8OAAC;4CAAI,WAAU;sDACX,cAAA,8OAAC;gDAAI,WAAU;0DAAuI;;;;;;;;;;;sDAK1J,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAI,WAAU;;sEACX,8OAAC;4DAAK,WAAU;sEAAyD;;;;;;sEACzE,8OAAC;4DAAI,WAAU;;8EACX,8OAAC;oEAAK,WAAU;8EACX,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;wEAAE,MAAM;wEAAW,QAAQ;oEAAU;;;;;;8EAE7F,8OAAC;oEACG,MAAK;oEACL,SAAS,IAAM,oBAAoB,QAAQ,EAAE;oEAC7C,UAAU,sBAAsB,QAAQ,EAAE;oEAC1C,WAAU;8EAET,sBAAsB,QAAQ,EAAE,GAAG,gBAAgB;;;;;;;;;;;;;;;;;;gDAK/D,QAAQ,IAAI,kBACT,8OAAC;oDAAE,WAAU;8DAA6D,QAAQ,IAAI;;;;;;gDAGzF,QAAQ,KAAK,kBACV,8OAAC;oDACG,KAAK,QAAQ,KAAK;oDAClB,KAAI;oDACJ,WAAU;;;;;;;;;;;;;mCAvCb,QAAQ,EAAE;;;;;;;;;;wBA+C1B,SAAS,MAAM,KAAK,mBACjB,8OAAC;4BAAI,WAAU;sCAAmK;;;;;;;;;;;;;;;;;;;;;;;AAQ1M"}}]
}